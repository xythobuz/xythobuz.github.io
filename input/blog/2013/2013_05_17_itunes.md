title: Blog
post: Musik Script History
date: 2013-05-17
comments: true
---

Ja, ich gebe zu, daß mein [Shell Skript][s] wirklich sehr hässlich war. Jetzt ist es zwar immer noch hässlich, aber nicht ganz so sehr. Und es merkt sich die letzten 10 gespielten Songs. Fuck yeah :D

Der Output ist nach wie vor [hier zu sehen][musik]...

<pre class="sh_sh">
#!/bin/sh

lasttrack=`cat /Users/thomas/.lasttrack`
host=`hostname`
datum=`date`

if [ "$1" != "$lasttrack" ]; then
    if [ "$1" != "" ]; then
        echo "&lt;html&gt;&lt;head&gt;&lt;meta charset=\"utf-8\" /&gt;&lt;title&gt;xythobuz listened to...&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;pre&gt;" &gt; /Users/thomas/.tmpfile
        echo "Last song played on &lt;b&gt;${host}&lt;/b&gt;'s iTunes:" &gt;&gt; /Users/thomas/.tmpfile
        echo &gt;&gt; /Users/thomas/.tmpfile
        echo "  &lt;b&gt;$1&lt;/b&gt;" &gt;&gt; /Users/thomas/.tmpfile
        echo "by" &gt;&gt; /Users/thomas/.tmpfile
        echo "  &lt;b&gt;$2&lt;/b&gt;" &gt;&gt; /Users/thomas/.tmpfile
        echo "on the Album" &gt;&gt; /Users/thomas/.tmpfile
        echo "  &lt;b&gt;$3&lt;/b&gt;" &gt;&gt; /Users/thomas/.tmpfile
        echo "at" &gt;&gt; /Users/thomas/.tmpfile
        echo "  &lt;i&gt;${datum}&lt;/i&gt;" &gt;&gt; /Users/thomas/.tmpfile
        echo &gt;&gt; /Users/thomas/.tmpfile
        echo "Last Songs played:" &gt;&gt; /Users/thomas/.tmpfile
        cat /Users/thomas/.trackhistory &gt;&gt; /Users/thomas/.tmpfile
        echo "&lt;/pre&gt;&lt;/body&gt;&lt;/html&gt;" &gt;&gt; /Users/thomas/.tmpfile

        scp /Users/thomas/.tmpfile zaphod:/var/www/lastmusic
        echo $1 &gt; /Users/thomas/.lasttrack
        echo "&lt;b&gt;$1&lt;/b&gt; by &lt;b&gt;$2&lt;/b&gt; on &lt;b&gt;$3&lt;/b&gt; at &lt;i&gt;${datum}&lt;/i&gt;" &gt;&gt; /Users/thomas/.trackhistory
        tail -n 10 /Users/thomas/.trackhistory | tee /Users/thomas/.trackhistory
    fi
fi
</pre>

 [musik]: lastmusic
 [s]: 2013_05_09_itunes.html
