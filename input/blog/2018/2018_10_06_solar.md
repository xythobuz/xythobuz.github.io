title: Blog
post: Photovoltaics Sun-Direction Controller
date: 2018-10-06
comments: true
---

## {{ page["post"] }}
<!--%
from datetime import datetime
date = datetime.strptime(page["date"], "%Y-%m-%d").strftime("%B %d, %Y")
print "*Posted at %s.*" % date
%-->

For about 30 years my Grandfather has been using Photovoltaics to generate electricity.
First for his small electric car that stored the energy in dozens of 12V lead batteries, later for feeding into the general electrical grid with an inverter.

The solar panels are mounted on a mast, about 5m high, in the garden.
They can be rotated to follow the sun. A simple (pre-bought) PCB uses two LDRs to sense
the suns direction in relation to the solar panels, moving the motor accordingly to balance their signals.

Last week I had to take a look at this system because the solar panels were no longer rotating.
Luckily, only the old Bosch 12V 2.6A power supply for the logic circuit and the motor was broken.
I simply replaced it with a cheap wall-wart.

<div class="lightgallery">
    <a href="img/solar_1.jpg">
        <img src="img/solar_1_small.jpg" alt="Overview of controller box">
    </a>
    <a href="img/solar_2.jpg">
        <img src="img/solar_2_small.jpg" alt="Closeup of PCB">
    </a>
    <a href="img/solar_3.jpg">
        <img src="img/solar_3_small.jpg" alt="All electonics on the mast">
    </a>
    <a href="img/solar_4.jpg">
        <img src="img/solar_4_small.jpg" alt="Full mast view">
    </a>
    <a href="img/solar_5.jpg">
        <img src="img/solar_5_small.jpg" alt="Closeup of rubber clutch">
    </a>
    <a href="img/solar_6.jpg">
        <img src="img/solar_6_small.jpg" alt="Motor and gearbox">
    </a>
    <a href="img/solar_7.jpg">
        <img src="img/solar_7_small.jpg" alt="Endstop switches and mechanical lock">
    </a>
    <a href="img/solar_8.jpg">
        <img src="img/solar_8_small.jpg" alt="Closeup of endstop switches">
    </a>
    <a href="img/solar_9.jpg">
        <img src="img/solar_9_small.jpg" alt="Full photovoltaics mast">
    </a>
    <a href="img/solar_10.jpg">
        <img src="img/solar_10_small.jpg" alt="Photovoltaics inverter">
    </a>
    <a href="img/solar_11.jpg">
        <img src="img/solar_11_small.jpg" alt="Power Supply for controller">
    </a>
</div>

I was already thinking about replacing the whole circuit with an ESP32 or something similar.
But it still seems to work fine, so this plan is on hold for now.

Below you can find the original description as well as the schematic for the logic circuit.

<div class="lightgallery">
    <a href="img/solar_12.png">
        <img src="img/solar_12_small.png" alt="Description, page 1">
    </a>
    <a href="img/solar_13.png">
        <img src="img/solar_13_small.png" alt="Descrtiption, page 2">
    </a>
    <a href="img/solar_15.png">
        <img src="img/solar_15_small.png" alt="Schematics">
    </a>
    <a href="img/solar_14.png">
        <img src="img/solar_14_small.png" alt="Overview">
    </a>
</div>

My Grandfather has modified this circuit.
In its original form it was only using a third LDR on the PCB to move toward the east-endstop at night, to prepare for the next day-cycle.
In cloudy weather, this has been causing problems because in the morning the light levels were not high enough for the motor to move.
Then, at noon, the sun was shining brightly again but was already too far westwards to be sensed by the LDRs.
So my Grandfather installed a time-switch in the cellar to output a signal everyday at noon.
He added some circuitry to move the motor to a new south-endstop (rather a mid-stop) to avoid the problem described above.
I was not yet able to find his notes about these modifications, and I was not motivated enough to reverse-engineer them, so maybe I will deliver in future on that...

